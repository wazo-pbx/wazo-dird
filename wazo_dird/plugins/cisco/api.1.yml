paths:
  /phones/cisco/{user_uuid}/menu:
    get:
      summary: Extends the directories menu for Cisco Unified IP Phones
      description: |
        **Required ACL:** `dird.phones.{user_uuid}.menu.read`

        The `menu` query will return a XML to extend the directories menu for Cisco
        Unified IP Phones.
      operationId: cisco_menu
      tags:
        - phone directories
      produces:
        - text/xml
      responses:
        '200':
          description: XML to extend the directories menu
          schema:
            $ref: '#/definitions/CiscoIPPhoneMenu'
        '503':
          $ref: '#/responses/AnotherServiceUnavailable'
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/UserUUID'
        - $ref: '#/parameters/ProxyUrl'
        - $ref: '#/parameters/AcceptLanguage'
        - $ref: '#/parameters/Profile'
  /phones/cisco/{user_uuid}/input:
    get:
      summary: Gives information on how to request contacts for Cisco Unified IP Phones
      description: |
        **Required ACL:** `dird.phones.{user_uuid}.input.read`

        The `input` query will return a XML that gives information on how to request
        contacts for Cisco Unified IP Phones.
      operationId: cisco_input
      tags:
        - phone directories
      produces:
        - text/xml
      responses:
        '200':
          description: XML to make contacts requests
          schema:
            $ref: '#/definitions/CiscoIPPhoneInput'
        '503':
          $ref: '#/responses/AnotherServiceUnavailable'
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/UserUUID'
        - $ref: '#/parameters/ProxyUrl'
        - $ref: '#/parameters/AcceptLanguage'
        - $ref: '#/parameters/Profile'
  /phones/cisco/{user_uuid}/contacts:
    get:
      summary: Search for contacts with Cisco Unified IP Phones
      description: |
        **Required ACL:** `dird.phones.{user_uuid}.contacts.read`

        The `contacts` query will return a list of result matching the searched term
        formated for Cisco Unified IP Phones. The result will be retrieved from all
        configured directories for the given profile.

        This route is provided by the `cisco_view` plugin using the `lookup` plugin
        and all configured sources for the given profile.
      operationId: cisco_lookup
      tags:
        - phone directories
      produces:
        - text/xml
      responses:
        '200':
          description: A list of contacts
          schema:
            $ref: '#/definitions/CiscoIPPhoneDirectory'
        '400':
          $ref: '#/responses/LimitOffsetInvalid'
        '404':
          $ref: '#/responses/ProfileInvalid'
        '503':
          $ref: '#/responses/AnotherServiceUnavailable'
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/UserUUID'
        - $ref: '#/parameters/Term'
        - $ref: '#/parameters/Limit16'
        - $ref: '#/parameters/Offset'
        - $ref: '#/parameters/ProxyUrl'
        - $ref: '#/parameters/AcceptLanguage'
        - $ref: '#/parameters/Profile'
definitions:
  CiscoIPPhoneDirectory:
    properties:
      DirectoryEntry:
        type: array
        items:
          $ref: '#/definitions/CiscoDirectoryEntry'
      SoftKeyItem:
        type: array
        items:
          $ref: '#/definitions/CiscoSoftKeyItem'
  CiscoDirectoryEntry:
    properties:
      Name:
        type: string
      Telephone:
        type: string
  CiscoSoftKeyItem:
    properties:
      Name:
        type: string
      URL:
        type: string
      position:
        type: integer
  CiscoIPPhoneMenu:
    properties:
      MenuItem:
        $ref: '#/definitions/CiscoMenuItem'
  CiscoMenuItem:
    properties:
      Name:
        type: string
      URL:
        type: string
  CiscoIPPhoneInput:
    properties:
      Title:
        type: string
      Prompt:
        type: string
      URL:
        type: string
      InputItem:
        $ref: '#/definitions/CiscoInputItem'
  CiscoInputItem:
    properties:
      DisplayName:
        type: string
      QueryStringParam:
        type: string
      DefaultValue:
        type: string
      InputFlags:
        type: string
