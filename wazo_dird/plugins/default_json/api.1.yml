paths:
  /users/{user_uuid}/contacts:
    get:
      summary: Search for contacts
      description: |
        **Required ACL:** `dird.users.{user_uuid}.contacts.lookup.read`

        The `contacts` query will return a list of result matching the searched term.
        The result will be retrieved from all configured directories for the given
        profile.

        The `search_strategy` can be used to modify the behavior of the search algorithm

        This route is provided by the `default_json_view` plugin using the `lookup`
        plugin and all configured sources for the given profile.

        Search strategies:

        * all: search through all configured sources and return results in the order they are received
        * ordered: same as `all` but results are in the same order as the source configuration
        * first: returns the first results from looking through all configured sources

        The `ordered` strategy must be used when doing pagination to get deterministic results

        Doing a reverse lookup would look like this:

          ```
          GET /users/me/contacts?search_strategy=first&term=5551234567
          ```
      operationId: lookup
      tags:
        - contacts
      responses:
        '200':
          description: A list of contacts
          schema:
            $ref: '#/definitions/Lookup'
        '404':
          $ref: '#/responses/ProfileInvalid'
        '503':
          $ref: '#/responses/AnotherServiceUnavailable'
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/UserUUID'
        - $ref: '#/parameters/Term'
        - $ref: '#/parameters/SearchStrategy'
        - $ref: '#/parameters/Profile'
  /users/{user_uuid}/favorites:
    get:
      summary: List favorite contacts
      description: '**Required ACL:** `dird.users.{user_uuid}.favorites.read`

        Get the list of favorite contacts for directories configured in the profile'
      operationId: list_favorites
      tags:
        - contacts
        - favorites
      responses:
        '200':
          description: A list of contacts
          schema:
            $ref: '#/definitions/ContactList'
        '404':
          $ref: '#/responses/ProfileInvalid'
        '503':
          $ref: '#/responses/AnotherServiceUnavailable'
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/UserUUID'
        - $ref: '#/parameters/Profile'
  /favorites/{source_uuid}/{contact}:
    put:
      summary: Mark a contact as favorite
      description: '**Required ACL:** `dird.favorites.{source_uuid}.{contact}.update`

        Add the contact from {source_uuid} to the list of favorite contacts.'
      operationId: add_favorite
      tags:
        - favorites
      responses:
        '204':
          description: Favorite added.
        '404':
          $ref: '#/responses/NotFoundError'
        '409':
          $ref: '#/responses/DuplicateFavorite'
        '503':
          $ref: '#/responses/AnotherServiceUnavailable'
      parameters:
      - $ref: '#/parameters/tenantuuid'
      - $ref: '#/parameters/sourceuuid'
      - $ref: '#/parameters/FavoriteID'
    delete:
      summary: Unmark a contact as favorite
      description: '**Required ACL:** `dird.favorites.{source_uuid}.{contact}.delete`


        Remove the contact from {directory} from the list of favorite contacts.'
      operationId: remove_favorite
      tags:
        - favorites
      responses:
        '204':
          description: Favorite removed.
        '404':
          $ref: '#/responses/NotFoundError'
        '503':
          $ref: '#/responses/AnotherServiceUnavailable'
      parameters:
      - $ref: '#/parameters/tenantuuid'
      - $ref: '#/parameters/sourceuuid'
      - $ref: '#/parameters/FavoriteID'
parameters:
  SearchStrategy:
    name: search_strategy
    in: query
    required: false
    description: The search strategy to use for the current request
    type: string
    default: all
    enum:
      - all
      - first
      - ordered
