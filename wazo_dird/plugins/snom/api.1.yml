paths:
  /phones/snom/{user_uuid}/input:
    get:
      summary: Given informations about how make request lookup for Snom Phones
      description: |
        **Required ACL:** `dird.phones.{xivo_user_uuid}.input.read`

        The `input` query will return a XML to give informations about how make request
        lookup for Snom Phones.
      operationId: snom_input
      tags:
        - phone directories
      produces:
        - text/xml
      responses:
        '200':
          description: XML to make request lookup
          schema:
            $ref: '#/definitions/SnomIPPhoneInput'
        '503':
          $ref: '#/responses/AnotherServiceUnavailable'
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/UserUUID'
        - $ref: '#/parameters/ProxyUrl'
        - $ref: '#/parameters/AcceptLanguage'
        - $ref: '#/parameters/Profile'
  /phones/snom/{user_uuid}/contacts:
    get:
      summary: Search for contacts with Snom Phones
      description: |
        **Required ACL:** `dird.phones.{user_uuid}.contacts.read`

        The `contacts` query will return a list of result matching the searched term
        formated for Snom Phones. The result will be retrieved from all configured
        directories for the given profile.

        This route is provided by the `snom_view` plugin using the `lookup` plugin
        and all configured sources for the given profile.
      operationId: snom_lookup
      tags:
        - phone directories
      produces:
        - text/xml
      responses:
        '200':
          description: A list of contacts
          schema:
            $ref: '#/definitions/SnomIPPhoneDirectory'
        '400':
          $ref: '#/responses/LimitOffsetInvalid'
        '404':
          $ref: '#/responses/ProfileInvalid'
        '503':
          $ref: '#/responses/AnotherServiceUnavailable'
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/UserUUID'
        - $ref: '#/parameters/Term'
        - $ref: '#/parameters/Limit16'
        - $ref: '#/parameters/Offset'
        - $ref: '#/parameters/ProxyUrl'
        - $ref: '#/parameters/AcceptLanguage'
        - $ref: '#/parameters/Profile'
definitions:
  SnomIPPhoneInput:
    properties:
      Title:
        type: string
      Prompt:
        type: string
      URL:
        type: string
      InputItem:
        $ref: '#/definitions/SnomInputItem'
  SnomInputItem:
    properties:
      DisplayName:
        type: string
      QueryStringParam:
        type: string
      DefaultValue:
        type: string
      InputFlags:
        type: string
  SnomIPPhoneDirectory:
    properties:
      DirectoryEntry:
        type: array
        items:
          $ref: '#/definitions/SnomDirectoryEntry'
      SoftKeyItem:
        type: array
        items:
          $ref: '#/definitions/SnomSoftKeyItem'
  SnomDirectoryEntry:
    properties:
      Name:
        type: string
      Telephone:
        type: string
  SnomSoftKeyItem:
    properties:
      Label:
        type: string
      URL:
        type: string
      Name:
        type: integer
